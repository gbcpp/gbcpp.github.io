$(document).ready(function(){var t,o,n,s,i=$(".g-nav"),c=$("meta[property='og:baseurl']").attr("content"),r=$(".g-logo"),l=$(".g-banner").attr("data-theme");function e(){var t,o,n,e=$("#search_input"),a=$(".search_result");e.focus(function(){$(".icon-search").css("color","#3199DB"),a.show()}),e.keyup((t=this.autoComplete,o=o||120,function(){var e=this,a=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(e,a)},o)})),$(document).click(function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),a.hide())})}function a(){var e=$("article :header"),a=$(".table-of-contents").find("a"),t=$(window).scrollTop();0<t&&$(".g-header").addClass("headerUp");for(var o=0;o<e.length;o++)$(e[o]).offset().top-100<t&&($(a).removeClass("active"),$(a[o]).addClass("active"))}function d(e){for(var a=e+"=",t=document.cookie.split(";"),o=0;o<t.length;o++){var n=t[o].trim();if(0==n.indexOf(a))return n.substring(a.length,n.length)}return""}function g(e,a,t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3);o="expires="+o.toGMTString();document.cookie=c?e+"="+a+"; path="+c+"; "+o:e+"="+a+"; path=/; "+o}function h(){var e=d("mode");""==e||"day"==e?(g("mode","night",1),$("body").addClass("night-mode")):(g("mode","day",1),$("body").removeClass("night-mode")),$(".g-nav li.mode .icon").toggleClass("active"),$("#mode-toggle .icon").toggleClass("active")}r.css({background:"url("+c+"/assets/icons/"+l+".svg) no-repeat center","background-size":"100% 100%"}),$("table").wrap("<div class='table-area'></div>"),$("#menu-toggle").on("click",function(e){i.slideToggle(200),$(document).on("click",function(){i.slideUp(200)}),e.stopPropagation()}),i.on("click",function(e){e.stopPropagation()}),695<$(window).width()&&(t=$(".g-header"),o=t.outerHeight(),n=i.find("a"),s=$(document).scrollTop(),r=$(".g-logo"),l=$(".g-banner").attr("data-theme"),$(document).scroll(function(){var e=$(this).scrollTop(),a="nav-"+l;o<e?(3*o<e&&t.addClass("headerUp"),t.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),r.css({background:"url("+c+"/assets/icons/"+l+".svg) no-repeat center","background-size":"100% 100%"}),n.css("color","#666"),i.addClass(a)):(t.removeClass("headerUp"),$(".bttb").removeClass("active"),t.css({"background-color":"transparent","box-shadow":"none"}),r.css({background:"url("+c+"/assets/icons/"+l+".svg) no-repeat center","background-size":"100% 100%"}),n.css("color","#fff"),i.removeClass(a)),e<s?(t.addClass("headerDown"),t.hasClass("headerUp")&&$(".bttb").addClass("active")):(t.removeClass("headerDown"),$(".bttb").removeClass("active")),s=e})),$(".bttb").bind("click",function(){$("html,body").animate({scrollTop:0})}),$(".read-next-item section").each(function(){var e=$(this).height(),a=$(".read-next-item").height();$(this).css("margin-top",(a-e)/2+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){var e,a,t,o,n,s;e=$(this),a=$(".read-next-item"),t=e.width(),o=a.width(),n=e.height(),s=a.height(),n<s?(e.css({width:"auto",height:"100%"}),t=e.width(),o=a.width(),e.css("margin-left","-"+(t-o)/2+"px")):e.css("margin-top",(s-n)/2+"px"),e.fadeIn()}),function(){for(var e=parseInt($("#total_pages").val()),a=parseInt($("#current_pages").val()),t=$("#base_url").val(),o="",n=a-3;n<a;n++)0<n&&1!==n?o+='<a href="'+t+"page"+n+'/index.html" class="page-link page-num">'+n+"</a>":1===n&&(o+='<a href="'+t+'" class="page-link page-num">'+n+"</a>");o+='<span class="page-link page-num active">'+a+"</span>";for(var s=a+1;s<=a+3;s++)s<=e&&(o+='<a href="'+t+"page"+s+'/index.html" class="page-link page-num">'+s+"</a>");$("#page-link-container").html(o)}(),e.prototype.autoComplete=function(){var i=this.value.toLowerCase();i.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),$.getJSON(c+"/assets/search.json").done(function(e){var a,t="";for(a in e){var o=e[a],n=o.title,s=o.tags;o.url;""!==i&&0<=(n+s).toLowerCase().indexOf(i)&&(t+='<a class="search_item" href="'+o.url+'">'+o.title+"</a>")}$(".search_result").html(t)})},new e,"true"===$("#nm-switch").val()&&function(){$("body");var e=(new Date).getHours(),a=d("mode");""==a&&(console.log(a),(e<=6||18<=e)&&(console.log("Start night mode"),g("mode","night",1)))}(),$(".post-content").on("mouseup",function(e){var a,t=window.getSelection();30<=t.toString().length&&(a=t,a+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",a),e.preventDefault()}))}),a(),$(window).bind("scroll",a),"night"==d("mode")?($(".g-nav li.mode .night").addClass("active"),$("#mode-toggle .icon-night").addClass("active"),$("body").addClass("night-mode")):($(".g-nav li.mode .day").addClass("active"),$("#mode-toggle .icon-day").addClass("active"),$("body").removeClass("night-mode")),$(".g-nav li.mode").click(function(){h()}),$("#mode-toggle").click(function(){h()})});