$(document).ready(function(){document.body.addEventListener("touchstart",function(){},{passive:!0});var a,o,s,n,e,t,i=$(".g-nav"),c=$("meta[property='og:baseurl']").attr("content"),r=$(".g-logo"),l=$(".g-banner").attr("data-theme");r.css({background:"url("+c+"/assets/icons/"+l+".svg) no-repeat center","background-size":"100% 100%"}),$("table").wrap("<div class='table-area'></div>"),$("#menu-toggle").on("click",function(e){i.slideToggle(200),$(document).on("click",function(){i.slideUp(200)}),e.stopPropagation()}),i.on("click",function(e){e.stopPropagation()}),695<$(window).width()?(s=(o=$(".g-header")).outerHeight(),a=i.find("a"),n=$(document).scrollTop(),r=$(".g-logo"),l=$(".g-banner").attr("data-theme"),$(document).scroll(function(){var e=$(this).scrollTop(),t="nav-"+l;s<e?(3*s<e&&o.addClass("headerUp"),o.css({"background-color":"rgba(255, 255, 255, .98)","box-shadow":"0 1px 12px rgba(0, 0, 0, .08)"}),r.css({background:"url("+c+"/assets/icons/"+l+".svg) no-repeat center","background-size":"100% 100%"}),a.css("color","#666"),i.addClass(t)):(o.removeClass("headerUp"),$("#bttb").removeClass("active"),o.css({"background-color":"transparent","box-shadow":"none"}),r.css({background:"url("+c+"/assets/icons/"+l+".svg) no-repeat center","background-size":"100% 100%"}),a.css("color","#fff"),i.removeClass(t)),e<n?(o.addClass("headerDown"),o.hasClass("headerUp")&&$("#bttb").addClass("active")):(o.removeClass("headerDown"),$("#bttb").removeClass("active")),n=e})):(s=(o=$(".g-header")).outerHeight(),n=$(document).scrollTop(),$(document).scroll(function(){var e=$(this).scrollTop();e<100&&$("#bttb").removeClass("active"),e<n&&5<n?$("#bttb").addClass("active"):$("#bttb").removeClass("active"),n=e})),$(".bttb").bind("click",function(){$("html,body").animate({scrollTop:0},function(){$("#bttb").removeClass("active")})}),$(".read-next-item section").each(function(){var e=$(this).height(),t=$(".read-next-item").height();$(this).css("margin-top",(t-e)/2+"px"),$(this).fadeIn()}),$(".read-next-item img").each(function(){var e,t,a,o,s,n;e=$(this),t=$(".read-next-item"),a=e.width(),o=t.width(),s=e.height(),n=t.height(),s<n?(e.css({width:"auto",height:"100%"}),a=e.width(),o=t.width(),e.css("margin-left","-"+(a-o)/2+"px")):e.css("margin-top",(n-s)/2+"px"),e.fadeIn(),$(this).attr("data-src",$(this).attr("src")).removeAttr("src").addClass("lazyload")});for(var d=parseInt($("#total_pages").val()),g=parseInt($("#current_pages").val()),h=$("#base_url").val(),u="",p=g-3;p<g;p++)0<p&&1!==p?u+='<a href="'+h+"page"+p+'/index.html" class="page-link page-num">'+p+"</a>":1===p&&(u+='<a href="'+h+'" class="page-link page-num">'+p+"</a>");u+='<span class="page-link page-num active">'+g+"</span>";for(var v=g+1;v<=g+3;v++)v<=d&&(u+='<a href="'+h+"page"+v+'/index.html" class="page-link page-num">'+v+"</a>");function m(){var a,o,s,e=$("#search_input"),t=$(".search_result");e.focus(function(){$(".icon-search").css("color","#3199DB"),t.show()}),e.keyup((a=this.autoComplete,o=o||120,function(){var e=this,t=arguments;clearTimeout(s),s=setTimeout(function(){a.apply(e,t)},o)})),$(document).click(function(e){"search_input"!==e.target.id&&"search_result"!==e.target.className&&"search_item"!==e.target.className&&($(".icon-search").css("color","#CAD3DC"),t.hide())})}function f(){var e=$("article :header"),t=$(".table-of-contents").find("a"),a=$(window).scrollTop();0<a&&$(".g-header").addClass("headerUp");for(var o=0;o<e.length;o++)$(e[o]).offset().top-100<a&&($(t).removeClass("active"),$(t[o]).addClass("active"))}function b(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){var s=a[o].trim();if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}function C(e,t,a){var o=new Date,a=(o.setTime(o.getTime()+24*a*60*60*1e3),"expires="+o.toGMTString());document.cookie=c?e+"="+t+"; path="+c+"; "+a:e+"="+t+"; path=/; "+a}function w(){var e=b("mode");""==e||"day"==e?(C("mode","night",1),$("body").addClass("night-mode")):(C("mode","day",1),$("body").removeClass("night-mode")),$(".g-nav li.mode .icon").toggleClass("active"),$("#mode-toggle .icon").toggleClass("active"),$(".icon.up.day").toggleClass("active"),$(".icon.up.night").toggleClass("active")}$("#page-link-container").html(u),m.prototype.autoComplete=function(){var i=this.value.toLowerCase(),e=(i.length?$(".icon-search").css("color","#3199DB"):$(".icon-search").css("color","#CAD3DC"),c+"/assets/search.json");$.getJSON(e).done(function(e){var t,a="";for(t in e){var o=e[t],s=o.title,n=o.tags;o.url;""!==i&&0<=(s+n).toLowerCase().indexOf(i)&&(a+='<a class="search_item" href="'+o.url+'">'+o.title+"</a>")}$(".search_result").html(a)})},new m,"true"===$("#nm-switch").val()&&($("body"),e=(new Date).getHours(),""==(t=b("mode"))&&(console.log(t),(e<=6||18<=e)&&(console.log("Start night mode"),C("mode","night",1)))),$(".post-content").on("mouseup",function(e){var t,a=window.getSelection();30<=a.toString().length&&(t=a,t+="\n\n著作权归作者所有。\n商业转载请联系作者获得授权,非商业转载请注明出处。\n原文: "+location.href,$(".post-content").on("copy",function(e){(window.clipboardData||e.originalEvent.clipboardData).setData("text/plain",t),e.preventDefault()}))}),f(),$(window).bind("scroll",f),"night"==b("mode")?($(".g-nav li.mode .night").addClass("active"),$("#mode-toggle .icon-night").addClass("active"),$("body").addClass("night-mode"),$(".icon.up.night").toggleClass("active")):($(".g-nav li.mode .day").addClass("active"),$("#mode-toggle .icon-day").addClass("active"),$("body").removeClass("night-mode"),$(".icon.up.day").toggleClass("active")),$(".g-nav li.mode").click(function(){w()}),$("#mode-toggle").click(function(){w()}),$("pre").each(function(e){e="codeblock"+(e+1);$(this).attr("id",e);e='<div class="copy-container"><span class="lang">'+$(this).attr("class").split(" ")[1].substring(9).toUpperCase()+'</span><button class="btn" data-bs-original-title="Copy" aria-label="Copy" data-clipboard-target="#'+e+'"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-copy"></use></svg><span class="tooltip unfinish">Copy</span><span class="tooltip finish">Copied</span></button></div>';$(this).before(e)}),new ClipboardJS(".btn").on("success",function(e){e.clearSelection()}),$(".markdown-body .btn").hover(function(){$(this).find(".tooltip.unfinish").addClass("active")},function(){$(this).find(".tooltip.unfinish").removeClass("active")}),$(".markdown-body .btn").click(function(){$(this).find(".tooltip.unfinish").removeClass("active");var e=$(this).find(".tooltip.finish");e.addClass("active"),setTimeout(function(){e.removeClass("active")},500)}),document.addEventListener("error",function(e){"IMG"==e.target.nodeName&&(e.target.src=c+"/assets/img/placeholder.webp")},!0)});