<!DOCTYPE html>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>


<html lang="zh-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows ä¸‹ç¼–è¯‘ WebRTC - Mr Chen</title>
    <meta name="author"  content="Mr Chen">
    <meta name="description" content="Windows ä¸‹ç¼–è¯‘ WebRTC">
    <meta name="keywords"  content="RTC">
    <!-- Open Graph -->
    <meta property="og:title" content="Windows ä¸‹ç¼–è¯‘ WebRTC - Mr Chen">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gbcpp.github.io/rtc/Windows-Build-WebRTC.html">
    <meta property="og:baseurl" content="">
    <meta property="og:description" content="ä¸ªäººçš„ä¸€ä¸ªæŠ€æœ¯åšå®¢ç«™ç‚¹ï¼Œä¸»è¦ç”¨äºè®°å½•ä¸ªäººåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°çš„æŠ€æœ¯é—®é¢˜åŠè§£å†³æ–¹æ³•ã€æŠ€æœ¯å®éªŒï¼Œä»¥åŠä¸€äº›æ¯”è¾ƒæœ‰è¶£çš„äº‹æƒ…ã€‚">
    <meta property="og:site_name" content="Mr Chen">
    <meta property="og:gray" content="false">
    
    <meta property="og:previous_url" content="/tech/Win10-deploy-XP-Server2003-application.html">
    
    
    <meta property="og:next_url" content="/notes/janus-server-setup.html">
    
    <meta property="post-date-format" content="0">
    
    <meta property="post-date" content="2018-01-28 23:58:14 +0000" />
    
    
    
    <meta name="theme-color" content="#81BBFF" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/assets/img/touch/apple-touch-icon.png"/>
    <link rel="Shortcut Icon" href="/favicon.ico">
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="bookmark" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.2.0/github-markdown-light.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-one-light.min.css" />
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.28.0/plugins/line-numbers/prism-line-numbers.min.css">
    
    <link rel="stylesheet" href="/assets/css/app.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.css" />
    <script src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
</head>



<body class="line-numbers" ontouchstart="">




  <!--[if lt IE 10]>
  <div class="alert-danger" role="alert">ä½ çš„æµè§ˆå™¨å®åœ¨å¤ªå¤ªå¤ªæ—§äº†ï¼Œæ”¾å­¦åˆ«èµ°ï¼Œå‡çº§å®Œæµè§ˆå™¨å†è¯´ï¼<a target="_blank" class="alert-link" href="http://browsehappy.com">ç«‹å³å‡çº§</a></div>
  <![endif]-->
  
  <div id="all" class="post" data-theme="default">
  
    <div class="alert-tip" id="no-previous">
      å·²ç»æ˜¯æœ€æ–°ä¸€ç¯‡æ–‡ç« äº†ï¼
    </div>
    <div class="alert-tip" id="no-next">
      å·²ç»æ˜¯æœ€åä¸€ç¯‡æ–‡ç« äº†ï¼
    </div>
    <input id="nm-switch" type="hidden" value="false"> <header class="g-header" data-theme="default">
    <div class="g-logo">
      <a href="/" aria-label="logo"></a>
    </div>
    <!-- <i id="menu-toggle" class="iconfont icon-menu"></i> -->
    <div id="mode-toggle">
        <svg class="icon icon-day" aria-hidden="true">
            <use xlink:href="#icon-day"></use>
        </svg>
        <svg class="icon icon-night" aria-hidden="true">
            <use xlink:href="#icon-night"></use>
        </svg>
    </div>
    <svg id="menu-toggle" class="icon-menu" aria-hidden="true">
        <use xlink:href="#icon-menu"></use>
    </svg>
    <nav class="g-nav">
        <ul>
            
                
                <li>
                    <a href="/" aria-label="home">
                        home
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/blog/index.html" aria-label="blog">
                        blog
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/archives.html" aria-label="archives">
                        archives
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/tags.html" aria-label="tags">
                        tags
                    </a>
                </li>
                
            
                
                <li class="dropdown">
                    <a class="dropdown-toggle"> about </a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="/feed.xml" aria-label="RSS">
                                RSS
                            </a>
                        </li>
                    
                    </ul> 
                </li>
                
            
            <li class="mode">
                <svg class="icon day" aria-hidden="true">
                    <use xlink:href="#icon-day"></use>
                </svg>
                <svg class="icon night" aria-hidden="true">
                    <use xlink:href="#icon-night"></use>
                </svg>
            </li>
        </ul>
    </nav>
</header>


    <header
      class="g-banner post-header post-pattern-circuitBoard bgcolor-default post-no-cover"
      data-theme="default"
    >
      <div class="post-wrapper">
        <div class="post-tags">
          
            
              <a href="/tags.html#RTC" class="post-tag">RTC</a>
            
          
        </div>
        <h1>Windows ä¸‹ç¼–è¯‘ WebRTC</h1>
        <div class="post-meta">
          <span class="post-meta-item">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-user"></use>
            </svg>
            Mr Chen
          </span>
          <time class="post-meta-item" datetime="18-01-28">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-calendar"></use>
            </svg>
            <span class="create-at"></span>
          </time>
          <time class="post-meta-item" datetime="18-01-28">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-update"></use>
            </svg>
            <span class="update-at"></span>
          </time>
            <span class="post-meta-item">
              <svg class="icon words" aria-hidden="true">
                <use xlink:href="#icon-words"></use>
              </svg>
              
              æœ¬æ–‡æ€»å…±  4.0k  å­—
            </span>
            <span class="post-meta-item">
              <svg class="icon time" aria-hidden="true">
                <use xlink:href="#icon-time"></use>
              </svg>
              é˜…è¯»å…¨æ–‡å¤§çº¦éœ€è¦ 12 åˆ†é’Ÿ
            </span>
            
              <span class="post-meta-item">
                <svg class="icon pv" aria-hidden="true">
                  <use xlink:href="#icon-pv"></use>
                </svg>
                æœ¬æ–‡æ€»é˜…è¯»é‡ <span id="busuanzi_value_page_pv"></span> æ¬¡
              </span>
            
            
        </div>
      </div>
      
    </header>
    <div class="post-content visible">
      

      
      
      <div class="container">  
        <div class="contents">
          <article class="markdown-body post">
              
            <h1 id="ä¸€ç³»ç»Ÿç¯å¢ƒå‡†å¤‡">ä¸€ã€ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</h1>

<h2 id="1å‚è€ƒå®˜æ–¹æ–‡æ¡£">1ã€å‚è€ƒå®˜æ–¹æ–‡æ¡£</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://webrtc.org/native-code/development/   //å®˜æ–¹ç¼–è¯‘æŒ‡å¯¼é¦–é¡µ
https://webrtc.org/native-code/development/prerequisite-sw/  //ä¾èµ–å·¥å…·å®‰è£…æŒ‡å¯¼é¡µ
http://dev.chromium.org/developers/how-tos/install-depot-tools //ç”¨äºä¸‹è½½ä»£ç çš„å·¥å…·åŒ…å®‰è£…æŒ‡å¯¼é¡µé¢
</code></pre></div></div>
<!--more-->

<h2 id="2windows-10--mingw--vs2015">2ã€Windows 10 &amp; MingW &amp; VS2015</h2>

<p>å¦‚æœå·²ç»å®‰è£…äº† cygwinï¼Œåˆ™å»ºè®®å…ˆå°†å…¶é‡å‘½åä¸º cygwin_bakï¼Œä½¿å…¶ç›®å½•å†…çš„å·¥å…·æ— æ•ˆï¼Œå› ä¸º WebRTC å®˜æ–¹æ–‡æ¡£å·²ç»æ˜ç¡®ä¸æ¨èä½¿ç”¨ CygWin äº†ï¼Œå¦åˆ™ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿå„ç§å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Chromium is mostly designed to be run using the native Windows tools and the Msys (Git for Windows) toolchain. Cygwin is not recommended, and likely things will fail in cryptic ways.
</code></pre></div></div>

<p>è‡ªè¡Œä¸‹è½½å¹¶å®‰è£… MingWã€‚</p>

<p>è‡ªè¡Œä¸‹è½½å®‰è£… VS2015ï¼Œå› ä¸ºæœ€æ–°çš„ webrtc ä½¿ç”¨åˆ°äº† C++ 11çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œå¦‚æœä½¿ç”¨ VS2013 ç­‰è¾ƒæ—§çš„ä¸€äº› IDEï¼Œå¯èƒ½ä¼šç”±äº å¯¹ C++ 11 æ”¯æŒçš„ä¸å¤Ÿå®Œæ•´ï¼Œè€Œäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚</p>

<h2 id="3å®‰è£…-python">3ã€å®‰è£… python</h2>
<p>ä¸‹è½½å¹¶å®‰è£… pythonï¼Œå¹¶å°†å…¶ç›®å½•é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œä¸€å®šè¦å®‰è£… Python 2.7 ç‰ˆæœ¬çš„ï¼Œå¤ªé«˜æˆ–è€…å¤ªä½å‡ä¼šæŠ¥é”™ï¼</p>

<p>å®‰è£…å®Œæˆåï¼Œå°† Python æ‰€åœ¨ç›®å½•æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶é€šè¿‡</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set PTATH=C:
exit
</code></pre></div></div>
<p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼Œç¡®è®¤ Python æ˜¯å¦å·²ç»æ­£ç¡®é…ç½®ï¼Œæ‰§è¡Œå‘½ä»¤</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>where python
</code></pre></div></div>
<p>å¦‚æœå¯ä»¥æœ‰æ•ˆè¾“å‡º python.exe æ‰€åœ¨ç›®å½•ï¼Œåˆ™é…ç½®æ­£ç¡®ã€‚</p>

<h2 id="4å®‰è£…-depot_tools">4ã€å®‰è£… depot_tools</h2>

<p>å®‰è£… WebRTC ä»£ç ä¸‹è½½å·¥å…· depot_toolsï¼ˆGoogleï¼‰ï¼Œå‚è€ƒé¡µé¢ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://dev.chromium.org/developers/how-tos/install-depot-tools
</code></pre></div></div>
<p>ï¼ŒWindows ä¸‹è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œéœ€å°† depot_toolss æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ â€˜PATHâ€™ çš„æœ€å‰é¢ï¼ˆç›®å½•ä¸­ä¸è¦æœ‰ç©ºæ ¼ï¼‰ï¼Œè®°å¾—åœ¨æ ‡å‡†çš„ cmd ä¸­æ‰§è¡Œä¸‹</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gclient
</code></pre></div></div>

<p>å‘½ä»¤ï¼Œé¦–æ¬¡å¯åŠ¨ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸‹è½½å®‰è£…æ‰€ä¾èµ–çš„ä¸€äº›å·¥å…·ï¼Œ<strong>ä½†åˆ‡è®°ä¸è¦åœ¨éæ ‡å‡†çš„ cmd ä¸­æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œå¦‚ cmder</strong>ï¼›</p>

<h2 id="5ä¸‹è½½å®‰è£…-windows-sdk-10">5ã€ä¸‹è½½å®‰è£… Windows SDK 10</h2>

<p>å®˜æ–¹ä¸‹è½½åœ°å€ <a href="https://developer.microsoft.com/zh-cn/windows/downloads/windows-10-sdk" rel="nofollow" target="_blank" class="extlinks">Windows10 sdk</a></p>

<p>å¹¶é…ç½®ç¯å¢ƒå˜é‡ WINDOWSSDKDIR æŒ‡å‘ SDK å®‰è£…ç›®å½•ï¼Œå¦‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WINDOWSSDKDIR=D:\Windows Kits\10
</code></pre></div></div>

<h2 id="6ä¿®æ”¹ç³»ç»Ÿè¯­è¨€">6ã€ä¿®æ”¹ç³»ç»Ÿè¯­è¨€</h2>

<p>é¦–å…ˆæ›´æ”¹ Windows ç³»ç»ŸåŒºåŸŸè¯­è¨€ä¸º  è‹±è¯­ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Control Panel â†’ System and Security â†’ System â†’ Advanced system settings
ä¸­æ–‡ï¼š
æ§åˆ¶é¢æ¿-&gt;æ—¶é’Ÿã€è¯­è¨€å’ŒåŒºåŸŸ-&gt;åŒºåŸŸ-&gt;ç®¡ç†ï¼ˆé€‰é¡¹å¡ï¼‰-&gt;æ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®ï¼› å¹¶é‡å¯
</code></pre></div></div>

<h2 id="7-è®¾ç½®é»˜è®¤ç¼–è¯‘å·¥å…·-ide-ç‰ˆæœ¬">7ã€ è®¾ç½®é»˜è®¤ç¼–è¯‘å·¥å…· IDE ç‰ˆæœ¬</h2>

<p>ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ å˜é‡ DEPOT_TOOLS_WIN_TOOLCHAIN ï¼Œå€¼è®¾ä¸º 0ï¼›è¿™ä¸ªç¯å¢ƒå˜é‡ä½œç”¨æ˜¯å‘Šè¯‰ deppt_tools ä½¿ç”¨æœ¬åœ°å·²å®‰è£…çš„é»˜è®¤çš„ Visual Studio ç‰ˆæœ¬å»ç¼–è¯‘ï¼›å¦åˆ™ depot_tools ä¼šä½¿ç”¨ Google å†…éƒ¨é»˜è®¤çš„ç‰ˆæœ¬ï¼›</p>

<h2 id="8è®¾ç½®ç¯å¢ƒå˜é‡ç”¨äºç”Ÿæˆ-vs-å·¥ç¨‹æ–‡ä»¶">8ã€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç”¨äºç”Ÿæˆ VS å·¥ç¨‹æ–‡ä»¶</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set DEPOT_TOOLS_WIN_TOOLCHAIN=0
set GYP_GENERATORS=ninja,msvs-ninja
set GYP_MSVS_VERSION=2015
</code></pre></div></div>

<h2 id="9å®‰è£…-directx-sdk">9ã€å®‰è£… DirectX SDk</h2>

<p>å®‰è£…DirectX SDK June 2010ï¼Œå®‰è£…å®Œæˆåå¯èƒ½ä¼šæŠ¥é”™ï¼Œé”™è¯¯ä»£ç â€œs1023â€,è¿™æ˜¯å› ä¸ºä¸ç³»ç»Ÿå·²æœ‰çš„visual c++ redistributable packagesç‰ˆæœ¬å†²çªï¼Œä¸ç”¨ç®¡å®ƒï¼Œç›´æ¥é€€å‡ºå®‰è£…ç¨‹åºå³å¯ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯å®‰è£…ç›®å½•ä¸‹çš„å¤´æ–‡ä»¶å’Œåº“ã€‚</p>

<p>#äºŒã€ ä¸‹è½½ WebRTC æºç </p>

<p>æ³¨ï¼šCMD å‘½ä»¤è¡Œçª—å£ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ï¼›</p>

<h2 id="1ä¸‹è½½æºç ">1ã€ä¸‹è½½æºç </h2>

<p>é€‰å®šå¥½ WebRTC æºç å­˜æ”¾ç›®å½•åï¼Œå¦‚ E:/OpenSource ç›®ä¸‹ï¼Œé€šè¿‡ CMD è¿›å…¥æ­¤ç›®å½•ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir webrtc-checkout
cd webrtc-checkout
fetch --nohooks webrtc
gclient sync
</code></pre></div></div>
<p>å‰ä¸‰æ¡å‘½ä»¤ä¸€æ¬¡è·å– WebRTC æºç ï¼Œéœ€è¦ä¸‹è½½è¾ƒé•¿çš„æ—¶é—´ã€‚</p>

<p>å¦‚æœåœ¨æ‰§è¡Œ gclient sync å‘½ä»¤æ—¶ï¼Œå‘ç°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please follow the instructions at https://www.chromium.org/developers/how-tos/build-instructions-windows                                                                          
***
returned non-zero exit status 1 in E:\OpenSource\webrtc-checkout                          
</code></pre></div></div>

<p>ä»”ç»†æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå¹¶å»ºè®®æˆ‘ä»¬å…ˆå‚è€ƒ</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://www.chromium.org/developers/how-tos/build-instructions-windows 
</code></pre></div></div>
<p>æŒ‡å¯¼é¡µå®Œæˆ Windows ä¸‹çš„ä¸€äº›ç¼–è¯‘å‡†å¤‡å·¥ä½œï¼Œå¯èƒ½æ˜¯æ¼æ‰äº†ä¸€äº›å‰æœŸå‡†å¤‡å·¥ä½œï¼Œä¸»è¦æ˜¯</p>

<p><strong>æ›´æ”¹ Windows ç³»ç»ŸåŒºåŸŸè¯­è¨€ä¸º  è‹±è¯­</strong></p>

<p>å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Control Panel â†’ System and Security â†’ System â†’ Advanced system settings
ä¸­æ–‡ï¼š
æ§åˆ¶é¢æ¿-&gt;æ—¶é’Ÿã€è¯­è¨€å’ŒåŒºåŸŸ-&gt;åŒºåŸŸ-&gt;ç®¡ç†ï¼ˆé€‰é¡¹å¡ï¼‰-&gt;æ›´æ”¹ç³»ç»ŸåŒºåŸŸè®¾ç½®ï¼› å¹¶é‡å¯
</code></pre></div></div>

<p><strong>ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ å˜é‡ DEPOT_TOOLS_WIN_TOOLCHAIN ï¼Œå€¼è®¾ä¸º 0</strong></p>

<p>è¿™ä¸ªç¯å¢ƒå˜é‡ä½œç”¨æ˜¯å‘Šè¯‰ deppt_tools ä½¿ç”¨æœ¬åœ°å·²å®‰è£…çš„é»˜è®¤çš„ Visual Studio ç‰ˆæœ¬å»ç¼–è¯‘ï¼›å¦åˆ™ depot_tools ä¼šä½¿ç”¨ Google å†…éƒ¨é»˜è®¤çš„ç‰ˆæœ¬ï¼›</p>

<p>è‡³æ­¤ç¯å¢ƒå·²ç»å½»åº•å‡†å¤‡å¥½ï¼Œé‡æ–°æ‰§è¡Œ</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gclient sync
</code></pre></div></div>
<p>å‘½åæ‰§è¡ŒæˆåŠŸï¼</p>

<h2 id="2-å¯é€‰é¡¹æŒ‡å®šå¦‚ä½•è·Ÿè¸ªå¤„ç†æ–°çš„åˆ†æ”¯">2ã€ å¯é€‰é¡¹ï¼šæŒ‡å®šå¦‚ä½•è·Ÿè¸ªå¤„ç†æ–°çš„åˆ†æ”¯</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  git config branch.autosetupmerge always
  git config branch.autosetuprebase always
</code></pre></div></div>

<p><strong>git config branch.autosetupmerge always</strong></p>

<p>è¡¨ç¤º è‡ªåŠ¨ä»è¿œç¨‹åˆ†æ”¯åˆå¹¶æäº¤åˆ°æœ¬åœ°åˆ†æ”¯ï¼Œå¦‚æœä¸åšæ­¤è®¾ç½®ï¼Œä½ éœ€è¦æ‰‹åŠ¨ mergeï¼›</p>

<p><strong>git config branch.autosetuprebase always</strong></p>

<p>è®¾ç½®åœ¨æ‰§è¡Œ git pull  å‘½ä»¤æ—¶åš rebase è€Œä¸æ˜¯æ˜¯ mergeï¼›å¯é€‰çš„å€¼è¿˜æœ‰ neverï¼šä¸è‡ªåŠ¨ rebaseï¼Œ local è·Ÿè¸ªæœ¬åœ°åˆ†æ”¯è¿›è¡Œ rebaseï¼Œ remote è·Ÿè¸ªè¿œç¨‹åˆ†æ”¯è¿›è¡Œ rebaseï¼Œ always æ‰€æœ‰è·Ÿè¸ªçš„åˆ†æ”¯éƒ½è‡ªåŠ¨è¿›è¡Œ rebaseï¼›  â€‹</p>

<h2 id="3-å¯é€‰é¡¹åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯">3ã€ å¯é€‰é¡¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cd src
  git checkout master
  git new-branch your-branch-name
</code></pre></div></div>

<p>å»ºè®®åˆ›å»ºä¸‹æ–°çš„æœ¬åœ°å¼€å‘åˆ†æ”¯ï¼Œå¦‚ï¼š git new-branch dev  â€‹</p>

<ul>
  <li>
    <p>ç¼–è¯‘å‰æ›´æ–°ä¸‹æœ€æ–°ä»£ç </p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div>    </div>

    <p><strong>æ³¨ï¼š</strong>å¦‚æœåœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæ²¡æœ‰åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œåˆ™ä½¿ç”¨</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git fetch
</code></pre></div>    </div>

    <p>å‘½ä»¤ä»£æ›¿ï¼Œä»¥è·å–æœ€æ–°ä»£ç ã€‚</p>
  </li>
</ul>

<p><strong>æ³¨ï¼š</strong>ç”±äºWebRTC ç›®å‰è¿˜åœ¨é¢‘ç¹çš„æ›´æ–°ä¸­ï¼Œå»ºè®®å®šæœŸçš„å»ä¸‹è½½æ›´æ–°ä¸‹ç¼–è¯‘å·¥å…·é“¾åŠå…¶ä¾èµ–ï¼Œé€šè¿‡æ‰§è¡Œ
gclient sync æ—¢å¯!</p>

<h1 id="ä¸‰ç¼–è¯‘">ä¸‰ã€ç¼–è¯‘</h1>

<p>WebRTC  ç›®å‰ä½¿ç”¨ GN æ¥ç”Ÿæˆæ„å»ºè„šæœ¬ï¼ŒNinja è¿›è¡Œæ„å»ºï¼Œæ‰€ä»¥ç³»ç»Ÿå¹³å°å‡æ˜¯ã€‚</p>

<p>æ‰€ä»¥ç½‘ä¸Šè¯´çš„é€šè¿‡ GYP ç”Ÿæˆ VS è§£å†³æ–¹æ¡ˆå·¥ç¨‹æ–‡ä»¶çš„åšæ–‡éƒ½å·²å¤±æ•ˆï¼Œç”¨çš„å‡ä¸ºæ—§ç‰ˆæœ¬çš„ webrtcã€‚</p>

<h2 id="1é€šè¿‡-ninja-ç¼–è¯‘">1ã€é€šè¿‡ Ninja ç¼–è¯‘</h2>

<h3 id="a-ç”Ÿæˆ-ninja-å·¥ç¨‹æ–‡ä»¶">aã€ ç”Ÿæˆ Ninja å·¥ç¨‹æ–‡ä»¶</h3>

<p>Ninja å·¥ç¨‹æ–‡ä»¶ç”± GN ç”Ÿæˆï¼Œä¸ºå…¶é€‰æ‹©ä¸€ä¸ªæ”¾ç½®çš„ç›®å½•ä¸­ï¼Œå¦‚ out/Debug æˆ–è€… out/Releaseï¼Œè¿™é‡Œå®˜æ–¹å»ºè®®é€‰æ‹© out/Default è¿™æ ·å¯ä»¥æ”¾ç½® debug å’Œ releaseï¼Œåœ¨ src ç›®å½•ä¸‹è¿˜è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen out/Default
</code></pre></div></div>

<p>å¦‚æœ æç¤º gn å‘½ä»¤ not foundï¼Œéœ€æ£€æŸ¥ depot_tools ç¯å¢ƒå˜é‡è®¾ç½®æ˜¯å¦ç”Ÿæ•ˆã€‚</p>

<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ Ninja å·¥ç¨‹æ–‡ä»¶</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen out/Default
</code></pre></div></div>

<p>å¦‚æœéœ€è¦ç”Ÿæˆ release å·¥ç¨‹æ–‡ä»¶ï¼Œéœ€åœ¨åé¢åŠ ä¸Šå…³é—­ debug çš„å‚æ•°  <strong>â€“args=is_debug= false</strong></p>

<p>å¦‚æœéœ€è¦æ¸…ç† Ninja å·¥ç¨‹æ–‡ä»¶ï¼Œä½†ä¿æŒ GN ç¯å¢ƒé…ç½®ä¸å˜çš„è¯ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn clean out/Default
</code></pre></div></div>

<h3 id="bé€šè¿‡-ninja-å‘½ä»¤ç¼–è¯‘">bã€é€šè¿‡ Ninja å‘½ä»¤ç¼–è¯‘</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ninja -C out/Default
</code></pre></div></div>

<h2 id="2é€šè¿‡-vs-ide-ç¼–è¯‘">2ã€é€šè¿‡ VS IDE ç¼–è¯‘</h2>

<p>é™¤äº† ninja å¤–ï¼Œå…¶ä»–çš„æ„å»ºç³»ç»Ÿä¸å—æ”¯æŒ(å¯èƒ½ä¼šå¤±è´¥)ï¼Œæ¯”å¦‚Windowsä¸Šçš„Visual Studioæˆ–è€…OSXä¸Šçš„Xcodeã€‚GNæ”¯æŒä¸€ç§æ··åˆä½¿ç”¨çš„æ–¹æ³•ï¼Œå³ç”± Visual studio/xcode ç”¨äºç¼–è¾‘å’Œé©±åŠ¨ç¼–è¯‘ã€‚</p>

<p>å®˜æ–¹åŸæ–‡å¦‚ä¸‹ï¼š</p>

<p>Other build systems are <strong>not supported</strong> (and may fail), such as Visual Studio on Windows or Xcode on OSX. GN supports a hybrid approach of using <a href="https://ninja-build.org/" rel="nofollow" target="_blank" class="extlinks">Ninja</a> for building, but Visual Studio/Xcode for editing and driving compilation.</p>

<h3 id="aç”Ÿæˆ-vs-è§£å†³æ–¹æ¡ˆå·¥ç¨‹æ–‡ä»¶">aã€ç”Ÿæˆ VS è§£å†³æ–¹æ¡ˆå·¥ç¨‹æ–‡ä»¶</h3>
<p>src ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆé»˜è®¤ç”Ÿæˆ Debug ï¼‰ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen --ide=vs out/Debug
</code></pre></div></div>

<p>ä¼šåœ¨ out/VS ç›®å½•ä¸‹ç”Ÿæˆ all.sln è§£å†³æ–¹æ¡ˆæ–‡ä»¶ï¼›å¦‚æœéœ€è¦ç”Ÿæˆ release å·¥ç¨‹æ–‡ä»¶ï¼Œéœ€åœ¨åé¢åŠ ä¸Šå…³é—­ debug çš„å‚æ•°  <strong>â€“args=â€™is_debug= falseâ€™</strong>
å³ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen --ide=vs out/Release --args=is_debug= false
</code></pre></div></div>

<h3 id="bæ‰“å¼€-allsln-æ–‡ä»¶ç¼–è¯‘">bã€æ‰“å¼€ all.sln æ–‡ä»¶ç¼–è¯‘</h3>


            <div class="post-copyright">
              <p>
                <span>ç‰ˆæƒå£°æ˜ï¼š</span>
                å¦‚æ— ç‰¹åˆ«å£°æ˜ï¼Œæœ¬æ–‡ç‰ˆæƒå½’
                <a href="https://gbcpp.github.io" class="cplink">Mr Chen</a>
                æ‰€æœ‰ï¼Œè½¬è½½è¯·æ³¨æ˜æœ¬æ–‡é“¾æ¥ã€‚ 
              </p>
              
                <p> 
                  ï¼ˆé‡‡ç”¨ 
                  <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="extlinks">CC BY-NC-SA 4.0</a> 
                  è®¸å¯åè®®è¿›è¡Œæˆæƒï¼‰
                </p>
              
              <p><span>æœ¬æ–‡æ ‡é¢˜ï¼š</span>ã€Š Windows ä¸‹ç¼–è¯‘ WebRTC ã€‹</p>
              <p><span>æœ¬æ–‡é“¾æ¥ï¼š</span><a href="https://gbcpp.github.io/rtc/Windows-Build-WebRTC.html" class="cplink">https://gbcpp.github.io/rtc/Windows-Build-WebRTC.html</a></p>
              <p class="tips">æœ¬æ–‡æœ€åä¸€æ¬¡æ›´æ–°ä¸º <span></span> å¤©å‰ï¼Œæ–‡ç« ä¸­çš„æŸäº›å†…å®¹å¯èƒ½å·²è¿‡æ—¶ï¼</p>
            </div>
          </article>
        </div>   
        <div class="table-of-contents">
          <h2>ç›®å½•</h2>
          <ul><li><a onclick="scrollToAdjust('ä¸€ã€ç³»ç»Ÿç¯å¢ƒå‡†å¤‡')">ä¸€ã€ç³»ç»Ÿç¯å¢ƒå‡†å¤‡</a><ul><li><a onclick="scrollToAdjust('1ã€å‚è€ƒå®˜æ–¹æ–‡æ¡£')">1ã€å‚è€ƒå®˜æ–¹æ–‡æ¡£</a></li><li><a onclick="scrollToAdjust('2ã€windows-10-&amp;-mingw-&amp;-vs2015')">2ã€Windows 10 &amp; MingW &amp; VS2015</a></li><li><a onclick="scrollToAdjust('3ã€å®‰è£…-python')">3ã€å®‰è£… python</a></li><li><a onclick="scrollToAdjust('4ã€å®‰è£…-depot_tools')">4ã€å®‰è£… depot_tools</a></li><li><a onclick="scrollToAdjust('5ã€ä¸‹è½½å®‰è£…-windows-sdk-10')">5ã€ä¸‹è½½å®‰è£… Windows SDK 10</a></li><li><a onclick="scrollToAdjust('6ã€ä¿®æ”¹ç³»ç»Ÿè¯­è¨€')">6ã€ä¿®æ”¹ç³»ç»Ÿè¯­è¨€</a></li><li><a onclick="scrollToAdjust('7ã€-è®¾ç½®é»˜è®¤ç¼–è¯‘å·¥å…·-ide-ç‰ˆæœ¬')">7ã€ è®¾ç½®é»˜è®¤ç¼–è¯‘å·¥å…· IDE ç‰ˆæœ¬</a></li><li><a onclick="scrollToAdjust('8ã€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç”¨äºç”Ÿæˆ-vs-å·¥ç¨‹æ–‡ä»¶')">8ã€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç”¨äºç”Ÿæˆ VS å·¥ç¨‹æ–‡ä»¶</a></li><li><a onclick="scrollToAdjust('9ã€å®‰è£…-directx-sdk')">9ã€å®‰è£… DirectX SDk</a></li><li><a onclick="scrollToAdjust('1ã€ä¸‹è½½æºç ')">1ã€ä¸‹è½½æºç </a></li><li><a onclick="scrollToAdjust('2ã€-å¯é€‰é¡¹æŒ‡å®šå¦‚ä½•è·Ÿè¸ªå¤„ç†æ–°çš„åˆ†æ”¯')">2ã€ å¯é€‰é¡¹ï¼šæŒ‡å®šå¦‚ä½•è·Ÿè¸ªå¤„ç†æ–°çš„åˆ†æ”¯</a></li><li><a onclick="scrollToAdjust('3ã€-å¯é€‰é¡¹åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯')">3ã€ å¯é€‰é¡¹ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°åˆ†æ”¯</a></li></ul></li><li><a onclick="scrollToAdjust('ä¸‰ã€ç¼–è¯‘')">ä¸‰ã€ç¼–è¯‘</a><ul><li><a onclick="scrollToAdjust('1ã€é€šè¿‡-ninja-ç¼–è¯‘')">1ã€é€šè¿‡ Ninja ç¼–è¯‘</a><ul><li><a onclick="scrollToAdjust('aã€-ç”Ÿæˆ-ninja-å·¥ç¨‹æ–‡ä»¶')">aã€ ç”Ÿæˆ Ninja å·¥ç¨‹æ–‡ä»¶</a></li><li><a onclick="scrollToAdjust('bã€é€šè¿‡-ninja-å‘½ä»¤ç¼–è¯‘')">bã€é€šè¿‡ Ninja å‘½ä»¤ç¼–è¯‘</a></li></ul></li><li><a onclick="scrollToAdjust('2ã€é€šè¿‡-vs-ide-ç¼–è¯‘')">2ã€é€šè¿‡ VS IDE ç¼–è¯‘</a><ul><li><a onclick="scrollToAdjust('aã€ç”Ÿæˆ-vs-è§£å†³æ–¹æ¡ˆå·¥ç¨‹æ–‡ä»¶')">aã€ç”Ÿæˆ VS è§£å†³æ–¹æ¡ˆå·¥ç¨‹æ–‡ä»¶</a></li><li><a onclick="scrollToAdjust('bã€æ‰“å¼€-all.sln-æ–‡ä»¶ç¼–è¯‘')">bã€æ‰“å¼€ all.sln æ–‡ä»¶ç¼–è¯‘</a></li></ul></li></ul></li></ul>
        </div>
      </div>
      

      
      <div class="social-share-wrapper">
        <div class="social-share"></div>
      </div>
      
    </div>

    <div>
     
     <section class="post-footer-item comment" style="padding-bottom: 4em">
     <div id="gitalk_container"></div>
     <div id="disqus_thread"></div>
     </section>
     
    </div>

    <section class="author-detail">
      <section class="post-footer-item author-card">
        <div class="avatar">
          <img src="/assets/img/wx_avatar.jpg" alt="">
        </div>
        <div class="author-name" rel="author">Mr Chen</div>
        <div class="bio">
          <p>èµ„æ·±æµåª’ä½“å¼€å‘å·¥ä½œè€…</p>
        </div>
        
        <ul class="sns-links">
          
          <li>
            <a href="https://github.com/gbcpp" target="_blank" aria-label="github">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-github"></use>
              </svg>
            </a>
          </li>
          
          <li>
            <a href="https://blog.csdn.net/m0_59561186?spm=1010.2135.3001.5343)" target="_blank" aria-label="csdn">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-csdn"></use>
              </svg>
            </a>
          </li>
          
        </ul>
        
      </section>
      <section class="post-footer-item read-next">
        
        <div class="read-next-item">
          <a href="/tech/Win10-deploy-XP-Server2003-application.html" class="read-next-link" aria-label="Windows 10 å¼€å‘éƒ¨ç½²æ”¯æŒ Windows XP å’Œ Windows Server 2003 çš„åº”ç”¨ç¨‹åº"></a>
          <section>
            <span>Windows 10 å¼€å‘éƒ¨ç½²æ”¯æŒ Windows XP å’Œ Windows Server 2003 çš„åº”ç”¨ç¨‹åº</span>
            <p>åœºæ™¯</p>
          </section>
          
      </div>
        

        
        <div class="read-next-item">
          <a href="/notes/janus-server-setup.html" class="read-next-link" aria-label="janus æœåŠ¡å™¨æ­å»º"></a>
            <section>
              <span>janus æœåŠ¡å™¨æ­å»º</span>
              <p>  Ubuntu ä¸‹ Janus Server æ­å»ºç¬”è®°</p>
            </section>
            
        </div>
        
      </section>
      
   
      

      
    </section>

  
  <script>
    var gitalk = new Gitalk({
      id: '2018-01-28 23:58:14 +0000',
      clientID: '7795ee35cc3373147f6e',  //è¿™é‡Œå…¶å®å¯ä»¥ç›´æ¥å¡«å€¼ï¼Œä½†æ˜¯è€ƒè™‘åˆ°é¡µé¢å®‰å…¨æ€§ï¼Œè¿˜æ˜¯é€šè¿‡é…ç½®çš„æ–¹å¼æ·»åŠ 
      clientSecret: '3c90889603d18c17cfd73289591b50a716925392',
      repo: 'gbcpp.github.io',
      owner: 'gbcpp',
      admin: 'gbcpp',
      distractionFreeMode: 'true'
    })

    gitalk.render('disqus_thread')
  </script>
  

    


<footer class="g-footer">
  <div class="g-container">
    <div class="g-left">
      <section class="links">
        æœ¬ç«™ç”± <a href="//jekyllrb.com" target="_blank" class="extlinks">Jekyll</a> å’Œ (åŸºäº <a href="https://github.com/kaeyleo/jekyll-theme-H2O" target="_blank" class="extlinks">H2O</a> çš„) <a href="https://github.com/zhonger/jekyll-theme-H2O-ac" target="_blank" class="extlinks">H2O-ac</a> å¼ºåŠ›é©±åŠ¨
         (<a href="https://github.com/zhonger/jekyll-theme-H2O-ac/releases/tag/v.1.2.1" target="_blank" class="extlinks">v1.2.1</a>)  
        
      </section>
      <section class="links">Mr Chen Â©
        
        
          2023
          -
        
        2025
        
          <a href="https://beian.miit.gov.cn/" target="_blank" class="extlinks">æ²ªICPå¤‡xxxxxxxxå·</a>
        
      </section>
      
      <section>
        <span id="busuanzi_container_site_pv">
          ğŸ‘ï¸ æ€»æµè§ˆé‡ <span id="busuanzi_value_site_pv"></span> <b>Â·</b>
        </span>
        <span id="busuanzi_container_site_uv">
          ğŸ‘¤ æ€»è®¿é—®é‡ <span id="busuanzi_value_site_uv"></span>
        </span>
      </section>
      
      <section>
        
      </section>
    </div>
    <div class="g-right">
      
      
    </div>
    
  </div>
</footer>
<div class="cookie-tip">
   ä¸ºäº†æå‡æœ¬ç«™çš„ä½¿ç”¨ä½“éªŒå’Œå¿…è¦åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨ï¼Œæœ¬ç«™ä¼šä½¿ç”¨æœ¬åœ° Cookieã€‚è¯¦ç»†è¯·æŸ¥çœ‹ã€Œ <a href="/tos.html">æœ¬ç«™ä½¿ç”¨æ¡æ¬¾</a> ã€äº†è§£æ›´å¤šã€‚

  <button id="accept-tos">åŒæ„</button>
</div>
<button id="list" aria-label="Scroll back to top" class="mobile-list" type="button">
  <svg class="icon list day" aria-hidden="true">
    <use xlink:href="#icon-list-day"></use>
  </svg>
  <svg class="icon list night" aria-hidden="true">
    <use xlink:href="#icon-list-night"></use>
  </svg>
  <svg class="icon exit day" aria-hidden="true">
    <use xlink:href="#icon-exit-day"></use>
  </svg>
  <svg class="icon exit night" aria-hidden="true">
    <use xlink:href="#icon-exit-night"></use>
  </svg>
</button>
<button id="bttb" aria-label="Scroll back to top" class="bttb" type="button">
  <svg class="icon up day" aria-hidden="true">
    <use xlink:href="#icon-up-day"></use>
  </svg>
  <svg class="icon up night" aria-hidden="true">
    <use xlink:href="#icon-up-night"></use>
  </svg>
</button>


    
    <div class="modal">
        <div class="modal-content">
          <header>
            <span class="close">&times;</span>
          </header>
          <div class="container"></div>
        </div>
    </div>
    
  </div>

  <script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
  <script>
    socialShare('.social-share', {
      sites: [
        
          'wechat'
          ,
          
        
          'weibo'
          ,
          
        
          'douban'
          ,
          
        
          'twitter'
          
        
      ],
      wechatQrcodeTitle: "åˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ",
      wechatQrcodeHelper: '<p>æ‰«ç åç‚¹å‡»å³ä¸Šè§’</p><p>å°†æœ¬æ–‡åˆ†äº«è‡³æœ‹å‹åœˆ</p>'
    });
    $("a.social-share-icon").each(function() {
      $(this).attr("aria-label", $(this).attr("class").split(' ')[1])
    });
  </script>

  

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
  <script src="/assets/js/app.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hotkeys-js/dist/hotkeys.min.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js" async></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.2/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.2/plugin/customParseFormat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.2/plugin/relativeTime.js"></script>
  <script>
    /**
    * Better Scroll Experience
    */
    function scrollToAdjust(id){
      var element = document.getElementById(id);
      var headerOffset = 90;
      var elementPosition = element.getBoundingClientRect().top;
      var offsetPosition = elementPosition + window.scrollY - headerOffset;
      window.scrollTo({
          top: offsetPosition,
          behavior: "smooth"
      });
    }
      // ç»™å›¾ç‰‡æ·»åŠ é“¾æ¥
      $(document).ready(function() {
          var baseurl = $("meta[property='og:baseurl']").attr('content');
          $("p img").each(function() {
              $(this).attr('data-src', $(this).attr('src')).removeAttr('src').addClass("lazyload").attr('src', baseurl + '/assets/img/loading.gif');
              var strA = "<a data-fancybox='gallery' ref='gallery' href='" + $(this).attr('data-src') + "' data-caption='" + $(this).attr('alt') + "'></a>";
              $(this).wrapAll(strA);
              var caption = $(this)[0].alt;
              $(this).parent().after('<span class="caption">' + caption + '</span>');
          });

          Fancybox.bind('[data-fancybox]', {
            on: {
              load: (fancybox, slide) => {
                var gray = $("meta[property='og:gray']").attr('content');
                if(gray == "true"){
                    $(".fancybox__content img").addClass("gray");
                    $(".carousel__track .fancybox__thumb").addClass("gray");
                }
              }
            }
          });   
          
          

          if($("#comments-switch").length > 0){
            var comment_status = $("#cmn-toggle-4")[0].checked;
            if(comment_status){
              $("#waline").addClass("active");
            }else {
              $("#disqus_thread").addClass("active");
            }
            $("#cmn-toggle-4").click(function(){
              $("#disqus_thread").toggleClass("active");
              $("#waline").toggleClass("active");
            })
          }else {
            if($("#disqus_thread").length > 0) {
              $("#disqus_thread").addClass("active");
            }else if($("#waline").length > 0) {
              $("#waline").addClass("active");
            }
          }

          var time_formats = ['YYYY-MM-DD HH:mm:ss ZZ', 'YYYY DD MMM HH:mm:ss ZZ', 'YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss ZZ'];
          function dateFormat(date, format){
            var date_org = dayjs(date, time_formats[format]);
            var date     = date_org.format(time_formats[format]);
            return {"date_org": date_org, "date": date}
          }

          dayjs.extend(window.dayjs_plugin_customParseFormat);
          dayjs.extend(window.dayjs_plugin_relativeTime);
          var post_date = $("meta[property='post-date']").attr('content');
          var post_date_format = $("meta[property='post-date-format']").attr('content');
          var local_post_date = dateFormat(post_date, post_date_format);

          $(".post time span.create-at").html(local_post_date["date"]);

          fetch("https://api.github.com/repos/gbcpp/gbcpp.github.io/commits?path=_posts/old_blog/2018-01-28-Windows-Build-WebRTC.md")
          .then((response) => {
            return response.json();
          })
          .then((commits) => {
            if(commits.length != 0){
              var update_at = dayjs(commits[0]['commit']['committer']['date']);
            }else {
              var update_at = post_date
            }

            var local_update_at = dateFormat(update_at, post_date_format);
            $('.post time span.update-at').html(local_update_at["date"]);

            var relative_time = dayjs().diff(local_update_at["date_org"], 'day');
            $(".post-copyright .tips span").append(relative_time);
            if(relative_time > 365){
              $(".post-copyright .tips").addClass("active");
            }
          });   
          
          /*
          * Keyboard shortcut bind: left and right
          */

          var previous_url = $("meta[property='og:previous_url']").attr('content');
          var next_url = $("meta[property='og:next_url']").attr('content');

          hotkeys('left', function(event, handler){
              // Prevent the default refresh event under WINDOWS system
              event.preventDefault();
              if(previous_url){
                  console.log('you pressed left!');
                  window.location.href = previous_url;
              }else {
                  $("#no-previous").addClass("active");
                  setTimeout(function(){$("#no-previous").removeClass("active");}, 1500);
              }
          });

          hotkeys('right', function(event, handler){
              // Prevent the default refresh event under WINDOWS system
              event.preventDefault();
              if(next_url){
                  console.log('you pressed right!');
                  window.location.href = next_url;
              }else {
                  $("#no-next").addClass("active");
                  setTimeout(function(){$("#no-next").removeClass("active");}, 1500);
              }
          });
      });
  </script>
  <script src="https://at.alicdn.com/t/font_3046306_skfh9jzzbbf.js"></script>

  
  
  
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
        if (navigator.serviceWorker.controller) {
            console.log("An active service worker found, no need to register");
        } else {
            // Register the service worker
            navigator.serviceWorker
            .register("/sw.js", {
                scope: "/"
            })
            .then(function (reg) {
                console.log("Service worker has been registered for scope: " + reg.scope);
            });
        }
    }

// æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒSW
// if(navigator.serviceWorker != null){
//     navigator.serviceWorker.register("/sw.js")
//         .then(function(registartion){
//             console.log('æ”¯æŒsw:',registartion.scope)
//         })
// } else {
//     console.log('ä¸æ”¯æŒsw')
// }
</script>
	<!--
Author: Ray-Eldath
refer to:
 - http://docs.mathjax.org/en/latest/options/index.html
-->

	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
		jax: ["input/TeX", "output/HTML-CSS"],
		tex2jax: {
			inlineMath: [ ["$", "$"] ],
			displayMath: [ ["$$", "$$"] ],
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
		},
		"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
      });
    </script>

   
    <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
    <script>
        $(document).ready(function (){
            mermaid.initialize({
                startOnLoad:true,
                theme: "default",
            });
            mermaid.init(undefined, $('.mermaid2'));
        });
    </script>
 
   
</body>

</html>
