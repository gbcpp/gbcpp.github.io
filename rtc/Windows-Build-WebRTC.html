<!DOCTYPE html>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>


<html lang="zh-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows 下编译 WebRTC - Mr Chen</title>
    <meta name="author"  content="Mr Chen">
    <meta name="description" content="Windows 下编译 WebRTC">
    <meta name="keywords"  content="RTC">
    <!-- Open Graph -->
    <meta property="og:title" content="Windows 下编译 WebRTC - Mr Chen">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gbcpp.github.io/rtc/Windows-Build-WebRTC.html">
    <meta property="og:baseurl" content="">
    <meta property="og:description" content="个人的一个技术博客站点，主要用于记录个人在学习过程中遇到的技术问题及解决方法、技术实验，以及一些比较有趣的事情。">
    <meta property="og:site_name" content="Mr Chen">
    <meta property="og:gray" content="false">
    
    <meta property="og:previous_url" content="/tech/Win10-deploy-XP-Server2003-application.html">
    
    
    <meta property="og:next_url" content="/notes/janus-server-setup.html">
    
    <meta property="post-date-format" content="0">
    
    <meta property="post-date" content="2018-01-28 23:58:14 +0000" />
    
    
    
    <meta name="theme-color" content="#81BBFF" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/assets/img/touch/apple-touch-icon.png"/>
    <link rel="Shortcut Icon" href="/favicon.ico">
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="bookmark" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.2.0/github-markdown-light.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">
    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-one-light.min.css" />
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.28.0/plugins/line-numbers/prism-line-numbers.min.css">
    
    <link rel="stylesheet" href="/assets/css/app.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.css" />
    <script src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
</head>



<body class="line-numbers" ontouchstart="">




  <!--[if lt IE 10]>
  <div class="alert-danger" role="alert">你的浏览器实在太太太旧了，放学别走，升级完浏览器再说！<a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div>
  <![endif]-->
  
  <div id="all" class="post" data-theme="default">
  
    <div class="alert-tip" id="no-previous">
      已经是最新一篇文章了！
    </div>
    <div class="alert-tip" id="no-next">
      已经是最后一篇文章了！
    </div>
    <input id="nm-switch" type="hidden" value="false"> <header class="g-header" data-theme="default">
    <div class="g-logo">
      <a href="/" aria-label="logo"></a>
    </div>
    <!-- <i id="menu-toggle" class="iconfont icon-menu"></i> -->
    <div id="mode-toggle">
        <svg class="icon icon-day" aria-hidden="true">
            <use xlink:href="#icon-day"></use>
        </svg>
        <svg class="icon icon-night" aria-hidden="true">
            <use xlink:href="#icon-night"></use>
        </svg>
    </div>
    <svg id="menu-toggle" class="icon-menu" aria-hidden="true">
        <use xlink:href="#icon-menu"></use>
    </svg>
    <nav class="g-nav">
        <ul>
            
                
                <li>
                    <a href="/" aria-label="home">
                        home
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/blog/index.html" aria-label="blog">
                        blog
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/archives.html" aria-label="archives">
                        archives
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/tags.html" aria-label="tags">
                        tags
                    </a>
                </li>
                
            
                
                <li class="dropdown">
                    <a class="dropdown-toggle"> about </a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="/feed.xml" aria-label="RSS">
                                RSS
                            </a>
                        </li>
                    
                    </ul> 
                </li>
                
            
            <li class="mode">
                <svg class="icon day" aria-hidden="true">
                    <use xlink:href="#icon-day"></use>
                </svg>
                <svg class="icon night" aria-hidden="true">
                    <use xlink:href="#icon-night"></use>
                </svg>
            </li>
        </ul>
    </nav>
</header>


    <header
      class="g-banner post-header post-pattern-circuitBoard bgcolor-default post-no-cover"
      data-theme="default"
    >
      <div class="post-wrapper">
        <div class="post-tags">
          
            
              <a href="/tags.html#RTC" class="post-tag">RTC</a>
            
          
        </div>
        <h1>Windows 下编译 WebRTC</h1>
        <div class="post-meta">
          <span class="post-meta-item">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-user"></use>
            </svg>
            Mr Chen
          </span>
          <time class="post-meta-item" datetime="18-01-28">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-calendar"></use>
            </svg>
            <span class="create-at"></span>
          </time>
          <time class="post-meta-item" datetime="18-01-28">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-update"></use>
            </svg>
            <span class="update-at"></span>
          </time>
            <span class="post-meta-item">
              <svg class="icon words" aria-hidden="true">
                <use xlink:href="#icon-words"></use>
              </svg>
              
              本文总共  4.0k  字
            </span>
            <span class="post-meta-item">
              <svg class="icon time" aria-hidden="true">
                <use xlink:href="#icon-time"></use>
              </svg>
              阅读全文大约需要 12 分钟
            </span>
            
              <span class="post-meta-item">
                <svg class="icon pv" aria-hidden="true">
                  <use xlink:href="#icon-pv"></use>
                </svg>
                本文总阅读量 <span id="busuanzi_value_page_pv"></span> 次
              </span>
            
            
        </div>
      </div>
      
    </header>
    <div class="post-content visible">
      

      
      
      <div class="container">  
        <div class="contents">
          <article class="markdown-body post">
              
            <h1 id="一系统环境准备">一、系统环境准备</h1>

<h2 id="1参考官方文档">1、参考官方文档</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://webrtc.org/native-code/development/   //官方编译指导首页
https://webrtc.org/native-code/development/prerequisite-sw/  //依赖工具安装指导页
http://dev.chromium.org/developers/how-tos/install-depot-tools //用于下载代码的工具包安装指导页面
</code></pre></div></div>
<!--more-->

<h2 id="2windows-10--mingw--vs2015">2、Windows 10 &amp; MingW &amp; VS2015</h2>

<p>如果已经安装了 cygwin，则建议先将其重命名为 cygwin_bak，使其目录内的工具无效，因为 WebRTC 官方文档已经明确不推荐使用 CygWin 了，否则编译过程中可能会发生各种奇奇怪怪的错误，原文如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Chromium is mostly designed to be run using the native Windows tools and the Msys (Git for Windows) toolchain. Cygwin is not recommended, and likely things will fail in cryptic ways.
</code></pre></div></div>

<p>自行下载并安装 MingW。</p>

<p>自行下载安装 VS2015，因为最新的 webrtc 使用到了 C++ 11的一些新特性，如果使用 VS2013 等较旧的一些 IDE，可能会由于 对 C++ 11 支持的不够完整，而产生编译错误。</p>

<h2 id="3安装-python">3、安装 python</h2>
<p>下载并安装 python，并将其目录配置在环境变量中，一定要安装 Python 2.7 版本的，太高或者太低均会报错！</p>

<p>安装完成后，将 Python 所在目录添加到 PATH 环境变量中，并通过</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set PTATH=C:
exit
</code></pre></div></div>
<p>使环境变量生效，确认 Python 是否已经正确配置，执行命令</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>where python
</code></pre></div></div>
<p>如果可以有效输出 python.exe 所在目录，则配置正确。</p>

<h2 id="4安装-depot_tools">4、安装 depot_tools</h2>

<p>安装 WebRTC 代码下载工具 depot_tools（Google），参考页面：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://dev.chromium.org/developers/how-tos/install-depot-tools
</code></pre></div></div>
<p>，Windows 下设置环境变量，需将 depot_toolss 所在目录添加到环境变量 ‘PATH’ 的最前面（目录中不要有空格），记得在标准的 cmd 中执行下</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gclient
</code></pre></div></div>

<p>命令，首次启动，它会自动下载安装所依赖的一些工具，<strong>但切记不要在非标准的 cmd 中执行此命令，如 cmder</strong>；</p>

<h2 id="5下载安装-windows-sdk-10">5、下载安装 Windows SDK 10</h2>

<p>官方下载地址 <a href="https://developer.microsoft.com/zh-cn/windows/downloads/windows-10-sdk" rel="nofollow" target="_blank" class="extlinks">Windows10 sdk</a></p>

<p>并配置环境变量 WINDOWSSDKDIR 指向 SDK 安装目录，如</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WINDOWSSDKDIR=D:\Windows Kits\10
</code></pre></div></div>

<h2 id="6修改系统语言">6、修改系统语言</h2>

<p>首先更改 Windows 系统区域语言为  英语，具体方法如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Control Panel → System and Security → System → Advanced system settings
中文：
控制面板-&gt;时钟、语言和区域-&gt;区域-&gt;管理（选项卡）-&gt;更改系统区域设置； 并重启
</code></pre></div></div>

<h2 id="7-设置默认编译工具-ide-版本">7、 设置默认编译工具 IDE 版本</h2>

<p>系统环境变量中添加变量 DEPOT_TOOLS_WIN_TOOLCHAIN ，值设为 0；这个环境变量作用是告诉 deppt_tools 使用本地已安装的默认的 Visual Studio 版本去编译；否则 depot_tools 会使用 Google 内部默认的版本；</p>

<h2 id="8设置环境变量用于生成-vs-工程文件">8、设置环境变量，用于生成 VS 工程文件</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set DEPOT_TOOLS_WIN_TOOLCHAIN=0
set GYP_GENERATORS=ninja,msvs-ninja
set GYP_MSVS_VERSION=2015
</code></pre></div></div>

<h2 id="9安装-directx-sdk">9、安装 DirectX SDk</h2>

<p>安装DirectX SDK June 2010，安装完成后可能会报错，错误代码“s1023”,这是因为与系统已有的visual c++ redistributable packages版本冲突，不用管它，直接退出安装程序即可。这里我们需要的只是安装目录下的头文件和库。</p>

<p>#二、 下载 WebRTC 源码</p>

<p>注：CMD 命令行窗口使用管理员权限打开；</p>

<h2 id="1下载源码">1、下载源码</h2>

<p>选定好 WebRTC 源码存放目录后，如 E:/OpenSource 目下，通过 CMD 进入此目录，依次执行以下命令：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir webrtc-checkout
cd webrtc-checkout
fetch --nohooks webrtc
gclient sync
</code></pre></div></div>
<p>前三条命令一次获取 WebRTC 源码，需要下载较长的时间。</p>

<p>如果在执行 gclient sync 命令时，发现以下错误信息：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please follow the instructions at https://www.chromium.org/developers/how-tos/build-instructions-windows                                                                          
***
returned non-zero exit status 1 in E:\OpenSource\webrtc-checkout                          
</code></pre></div></div>

<p>仔细查看报错信息，可以看到，命令执行失败，并建议我们先参考</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>https://www.chromium.org/developers/how-tos/build-instructions-windows 
</code></pre></div></div>
<p>指导页完成 Windows 下的一些编译准备工作，可能是漏掉了一些前期准备工作，主要是</p>

<p><strong>更改 Windows 系统区域语言为  英语</strong></p>

<p>具体方法如下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Control Panel → System and Security → System → Advanced system settings
中文：
控制面板-&gt;时钟、语言和区域-&gt;区域-&gt;管理（选项卡）-&gt;更改系统区域设置； 并重启
</code></pre></div></div>

<p><strong>系统环境变量中添加变量 DEPOT_TOOLS_WIN_TOOLCHAIN ，值设为 0</strong></p>

<p>这个环境变量作用是告诉 deppt_tools 使用本地已安装的默认的 Visual Studio 版本去编译；否则 depot_tools 会使用 Google 内部默认的版本；</p>

<p>至此环境已经彻底准备好，重新执行</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gclient sync
</code></pre></div></div>
<p>命名执行成功！</p>

<h2 id="2-可选项指定如何跟踪处理新的分支">2、 可选项：指定如何跟踪处理新的分支</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  git config branch.autosetupmerge always
  git config branch.autosetuprebase always
</code></pre></div></div>

<p><strong>git config branch.autosetupmerge always</strong></p>

<p>表示 自动从远程分支合并提交到本地分支，如果不做此设置，你需要手动 merge；</p>

<p><strong>git config branch.autosetuprebase always</strong></p>

<p>设置在执行 git pull  命令时做 rebase 而不是是 merge；可选的值还有 never：不自动 rebase， local 跟踪本地分支进行 rebase， remote 跟踪远程分支进行 rebase， always 所有跟踪的分支都自动进行 rebase；  ​</p>

<h2 id="3-可选项创建一个新的本地分支">3、 可选项：创建一个新的本地分支</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  cd src
  git checkout master
  git new-branch your-branch-name
</code></pre></div></div>

<p>建议创建下新的本地开发分支，如： git new-branch dev  ​</p>

<ul>
  <li>
    <p>编译前更新下最新代码</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git pull
</code></pre></div>    </div>

    <p><strong>注：</strong>如果在上一步中，没有创建新的分支，则使用</p>

    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git fetch
</code></pre></div>    </div>

    <p>命令代替，以获取最新代码。</p>
  </li>
</ul>

<p><strong>注：</strong>由于WebRTC 目前还在频繁的更新中，建议定期的去下载更新下编译工具链及其依赖，通过执行
gclient sync 既可!</p>

<h1 id="三编译">三、编译</h1>

<p>WebRTC  目前使用 GN 来生成构建脚本，Ninja 进行构建，所以系统平台均是。</p>

<p>所以网上说的通过 GYP 生成 VS 解决方案工程文件的博文都已失效，用的均为旧版本的 webrtc。</p>

<h2 id="1通过-ninja-编译">1、通过 Ninja 编译</h2>

<h3 id="a-生成-ninja-工程文件">a、 生成 Ninja 工程文件</h3>

<p>Ninja 工程文件由 GN 生成，为其选择一个放置的目录中，如 out/Debug 或者 out/Release，这里官方建议选择 out/Default 这样可以放置 debug 和 release，在 src 目录下还行一下命令：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen out/Default
</code></pre></div></div>

<p>如果 提示 gn 命令 not found，需检查 depot_tools 环境变量设置是否生效。</p>

<p>执行以下命令生成 Ninja 工程文件</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen out/Default
</code></pre></div></div>

<p>如果需要生成 release 工程文件，需在后面加上关闭 debug 的参数  <strong>–args=is_debug= false</strong></p>

<p>如果需要清理 Ninja 工程文件，但保持 GN 环境配置不变的话，可以执行以下命令：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn clean out/Default
</code></pre></div></div>

<h3 id="b通过-ninja-命令编译">b、通过 Ninja 命令编译</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ninja -C out/Default
</code></pre></div></div>

<h2 id="2通过-vs-ide-编译">2、通过 VS IDE 编译</h2>

<p>除了 ninja 外，其他的构建系统不受支持(可能会失败)，比如Windows上的Visual Studio或者OSX上的Xcode。GN支持一种混合使用的方法，即由 Visual studio/xcode 用于编辑和驱动编译。</p>

<p>官方原文如下：</p>

<p>Other build systems are <strong>not supported</strong> (and may fail), such as Visual Studio on Windows or Xcode on OSX. GN supports a hybrid approach of using <a href="https://ninja-build.org/" rel="nofollow" target="_blank" class="extlinks">Ninja</a> for building, but Visual Studio/Xcode for editing and driving compilation.</p>

<h3 id="a生成-vs-解决方案工程文件">a、生成 VS 解决方案工程文件</h3>
<p>src 目录下执行以下命令（默认生成 Debug ）：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen --ide=vs out/Debug
</code></pre></div></div>

<p>会在 out/VS 目录下生成 all.sln 解决方案文件；如果需要生成 release 工程文件，需在后面加上关闭 debug 的参数  <strong>–args=’is_debug= false’</strong>
即：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gn gen --ide=vs out/Release --args=is_debug= false
</code></pre></div></div>

<h3 id="b打开-allsln-文件编译">b、打开 all.sln 文件编译</h3>


            <div class="post-copyright">
              <p>
                <span>版权声明：</span>
                如无特别声明，本文版权归
                <a href="https://gbcpp.github.io" class="cplink">Mr Chen</a>
                所有，转载请注明本文链接。 
              </p>
              
                <p> 
                  （采用 
                  <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="extlinks">CC BY-NC-SA 4.0</a> 
                  许可协议进行授权）
                </p>
              
              <p><span>本文标题：</span>《 Windows 下编译 WebRTC 》</p>
              <p><span>本文链接：</span><a href="https://gbcpp.github.io/rtc/Windows-Build-WebRTC.html" class="cplink">https://gbcpp.github.io/rtc/Windows-Build-WebRTC.html</a></p>
              <p class="tips">本文最后一次更新为 <span></span> 天前，文章中的某些内容可能已过时！</p>
            </div>
          </article>
        </div>   
        <div class="table-of-contents">
          <h2>目录</h2>
          <ul><li><a onclick="scrollToAdjust('一、系统环境准备')">一、系统环境准备</a><ul><li><a onclick="scrollToAdjust('1、参考官方文档')">1、参考官方文档</a></li><li><a onclick="scrollToAdjust('2、windows-10-&amp;-mingw-&amp;-vs2015')">2、Windows 10 &amp; MingW &amp; VS2015</a></li><li><a onclick="scrollToAdjust('3、安装-python')">3、安装 python</a></li><li><a onclick="scrollToAdjust('4、安装-depot_tools')">4、安装 depot_tools</a></li><li><a onclick="scrollToAdjust('5、下载安装-windows-sdk-10')">5、下载安装 Windows SDK 10</a></li><li><a onclick="scrollToAdjust('6、修改系统语言')">6、修改系统语言</a></li><li><a onclick="scrollToAdjust('7、-设置默认编译工具-ide-版本')">7、 设置默认编译工具 IDE 版本</a></li><li><a onclick="scrollToAdjust('8、设置环境变量，用于生成-vs-工程文件')">8、设置环境变量，用于生成 VS 工程文件</a></li><li><a onclick="scrollToAdjust('9、安装-directx-sdk')">9、安装 DirectX SDk</a></li><li><a onclick="scrollToAdjust('1、下载源码')">1、下载源码</a></li><li><a onclick="scrollToAdjust('2、-可选项指定如何跟踪处理新的分支')">2、 可选项：指定如何跟踪处理新的分支</a></li><li><a onclick="scrollToAdjust('3、-可选项创建一个新的本地分支')">3、 可选项：创建一个新的本地分支</a></li></ul></li><li><a onclick="scrollToAdjust('三、编译')">三、编译</a><ul><li><a onclick="scrollToAdjust('1、通过-ninja-编译')">1、通过 Ninja 编译</a><ul><li><a onclick="scrollToAdjust('a、-生成-ninja-工程文件')">a、 生成 Ninja 工程文件</a></li><li><a onclick="scrollToAdjust('b、通过-ninja-命令编译')">b、通过 Ninja 命令编译</a></li></ul></li><li><a onclick="scrollToAdjust('2、通过-vs-ide-编译')">2、通过 VS IDE 编译</a><ul><li><a onclick="scrollToAdjust('a、生成-vs-解决方案工程文件')">a、生成 VS 解决方案工程文件</a></li><li><a onclick="scrollToAdjust('b、打开-all.sln-文件编译')">b、打开 all.sln 文件编译</a></li></ul></li></ul></li></ul>
        </div>
      </div>
      

      
      <div class="social-share-wrapper">
        <div class="social-share"></div>
      </div>
      
    </div>

    <div>
     
     <section class="post-footer-item comment" style="padding-bottom: 4em">
     <div id="gitalk_container"></div>
     <div id="disqus_thread"></div>
     </section>
     
    </div>

    <section class="author-detail">
      <section class="post-footer-item author-card">
        <div class="avatar">
          <img src="/assets/img/wx_avatar.jpg" alt="">
        </div>
        <div class="author-name" rel="author">Mr Chen</div>
        <div class="bio">
          <p>资深流媒体开发工作者</p>
        </div>
        
        <ul class="sns-links">
          
          <li>
            <a href="https://github.com/gbcpp" target="_blank" aria-label="github">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-github"></use>
              </svg>
            </a>
          </li>
          
          <li>
            <a href="https://blog.csdn.net/m0_59561186?spm=1010.2135.3001.5343)" target="_blank" aria-label="csdn">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-csdn"></use>
              </svg>
            </a>
          </li>
          
        </ul>
        
      </section>
      <section class="post-footer-item read-next">
        
        <div class="read-next-item">
          <a href="/tech/Win10-deploy-XP-Server2003-application.html" class="read-next-link" aria-label="Windows 10 开发部署支持 Windows XP 和 Windows Server 2003 的应用程序"></a>
          <section>
            <span>Windows 10 开发部署支持 Windows XP 和 Windows Server 2003 的应用程序</span>
            <p>场景</p>
          </section>
          
      </div>
        

        
        <div class="read-next-item">
          <a href="/notes/janus-server-setup.html" class="read-next-link" aria-label="janus 服务器搭建"></a>
            <section>
              <span>janus 服务器搭建</span>
              <p>  Ubuntu 下 Janus Server 搭建笔记</p>
            </section>
            
        </div>
        
      </section>
      
   
      

      
    </section>

  
  <script>
    var gitalk = new Gitalk({
      id: '2018-01-28 23:58:14 +0000',
      clientID: '7795ee35cc3373147f6e',  //这里其实可以直接填值，但是考虑到页面安全性，还是通过配置的方式添加
      clientSecret: '3c90889603d18c17cfd73289591b50a716925392',
      repo: 'gbcpp.github.io',
      owner: 'gbcpp',
      admin: 'gbcpp',
      distractionFreeMode: 'true'
    })

    gitalk.render('disqus_thread')
  </script>
  

    


<footer class="g-footer">
  <div class="g-container">
    <div class="g-left">
      <section class="links">
        本站由 <a href="//jekyllrb.com" target="_blank" class="extlinks">Jekyll</a> 和 (基于 <a href="https://github.com/kaeyleo/jekyll-theme-H2O" target="_blank" class="extlinks">H2O</a> 的) <a href="https://github.com/zhonger/jekyll-theme-H2O-ac" target="_blank" class="extlinks">H2O-ac</a> 强力驱动
         (<a href="https://github.com/zhonger/jekyll-theme-H2O-ac/releases/tag/v.1.2.1" target="_blank" class="extlinks">v1.2.1</a>)  
        
      </section>
      <section class="links">Mr Chen ©
        
        
          2023
          -
        
        2025
        
          <a href="https://beian.miit.gov.cn/" target="_blank" class="extlinks">沪ICP备xxxxxxxx号</a>
        
      </section>
      
      <section>
        <span id="busuanzi_container_site_pv">
          👁️ 总浏览量 <span id="busuanzi_value_site_pv"></span> <b>·</b>
        </span>
        <span id="busuanzi_container_site_uv">
          👤 总访问量 <span id="busuanzi_value_site_uv"></span>
        </span>
      </section>
      
      <section>
        
      </section>
    </div>
    <div class="g-right">
      
      
    </div>
    
  </div>
</footer>
<div class="cookie-tip">
   为了提升本站的使用体验和必要功能的正常使用，本站会使用本地 Cookie。详细请查看「 <a href="/tos.html">本站使用条款</a> 」了解更多。

  <button id="accept-tos">同意</button>
</div>
<button id="list" aria-label="Scroll back to top" class="mobile-list" type="button">
  <svg class="icon list day" aria-hidden="true">
    <use xlink:href="#icon-list-day"></use>
  </svg>
  <svg class="icon list night" aria-hidden="true">
    <use xlink:href="#icon-list-night"></use>
  </svg>
  <svg class="icon exit day" aria-hidden="true">
    <use xlink:href="#icon-exit-day"></use>
  </svg>
  <svg class="icon exit night" aria-hidden="true">
    <use xlink:href="#icon-exit-night"></use>
  </svg>
</button>
<button id="bttb" aria-label="Scroll back to top" class="bttb" type="button">
  <svg class="icon up day" aria-hidden="true">
    <use xlink:href="#icon-up-day"></use>
  </svg>
  <svg class="icon up night" aria-hidden="true">
    <use xlink:href="#icon-up-night"></use>
  </svg>
</button>


    
    <div class="modal">
        <div class="modal-content">
          <header>
            <span class="close">&times;</span>
          </header>
          <div class="container"></div>
        </div>
    </div>
    
  </div>

  <script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
  <script>
    socialShare('.social-share', {
      sites: [
        
          'wechat'
          ,
          
        
          'weibo'
          ,
          
        
          'douban'
          ,
          
        
          'twitter'
          
        
      ],
      wechatQrcodeTitle: "分享到微信朋友圈",
      wechatQrcodeHelper: '<p>扫码后点击右上角</p><p>将本文分享至朋友圈</p>'
    });
    $("a.social-share-icon").each(function() {
      $(this).attr("aria-label", $(this).attr("class").split(' ')[1])
    });
  </script>

  

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
  <script src="/assets/js/app.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hotkeys-js/dist/hotkeys.min.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js" async></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.2/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.2/plugin/customParseFormat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.2/plugin/relativeTime.js"></script>
  <script>
    /**
    * Better Scroll Experience
    */
    function scrollToAdjust(id){
      var element = document.getElementById(id);
      var headerOffset = 90;
      var elementPosition = element.getBoundingClientRect().top;
      var offsetPosition = elementPosition + window.scrollY - headerOffset;
      window.scrollTo({
          top: offsetPosition,
          behavior: "smooth"
      });
    }
      // 给图片添加链接
      $(document).ready(function() {
          var baseurl = $("meta[property='og:baseurl']").attr('content');
          $("p img").each(function() {
              $(this).attr('data-src', $(this).attr('src')).removeAttr('src').addClass("lazyload").attr('src', baseurl + '/assets/img/loading.gif');
              var strA = "<a data-fancybox='gallery' ref='gallery' href='" + $(this).attr('data-src') + "' data-caption='" + $(this).attr('alt') + "'></a>";
              $(this).wrapAll(strA);
              var caption = $(this)[0].alt;
              $(this).parent().after('<span class="caption">' + caption + '</span>');
          });

          Fancybox.bind('[data-fancybox]', {
            on: {
              load: (fancybox, slide) => {
                var gray = $("meta[property='og:gray']").attr('content');
                if(gray == "true"){
                    $(".fancybox__content img").addClass("gray");
                    $(".carousel__track .fancybox__thumb").addClass("gray");
                }
              }
            }
          });   
          
          

          if($("#comments-switch").length > 0){
            var comment_status = $("#cmn-toggle-4")[0].checked;
            if(comment_status){
              $("#waline").addClass("active");
            }else {
              $("#disqus_thread").addClass("active");
            }
            $("#cmn-toggle-4").click(function(){
              $("#disqus_thread").toggleClass("active");
              $("#waline").toggleClass("active");
            })
          }else {
            if($("#disqus_thread").length > 0) {
              $("#disqus_thread").addClass("active");
            }else if($("#waline").length > 0) {
              $("#waline").addClass("active");
            }
          }

          var time_formats = ['YYYY-MM-DD HH:mm:ss ZZ', 'YYYY DD MMM HH:mm:ss ZZ', 'YYYY年MM月DD日 HH:mm:ss ZZ'];
          function dateFormat(date, format){
            var date_org = dayjs(date, time_formats[format]);
            var date     = date_org.format(time_formats[format]);
            return {"date_org": date_org, "date": date}
          }

          dayjs.extend(window.dayjs_plugin_customParseFormat);
          dayjs.extend(window.dayjs_plugin_relativeTime);
          var post_date = $("meta[property='post-date']").attr('content');
          var post_date_format = $("meta[property='post-date-format']").attr('content');
          var local_post_date = dateFormat(post_date, post_date_format);

          $(".post time span.create-at").html(local_post_date["date"]);

          fetch("https://api.github.com/repos/gbcpp/gbcpp.github.io/commits?path=_posts/old_blog/2018-01-28-Windows-Build-WebRTC.md")
          .then((response) => {
            return response.json();
          })
          .then((commits) => {
            if(commits.length != 0){
              var update_at = dayjs(commits[0]['commit']['committer']['date']);
            }else {
              var update_at = post_date
            }

            var local_update_at = dateFormat(update_at, post_date_format);
            $('.post time span.update-at').html(local_update_at["date"]);

            var relative_time = dayjs().diff(local_update_at["date_org"], 'day');
            $(".post-copyright .tips span").append(relative_time);
            if(relative_time > 365){
              $(".post-copyright .tips").addClass("active");
            }
          });   
          
          /*
          * Keyboard shortcut bind: left and right
          */

          var previous_url = $("meta[property='og:previous_url']").attr('content');
          var next_url = $("meta[property='og:next_url']").attr('content');

          hotkeys('left', function(event, handler){
              // Prevent the default refresh event under WINDOWS system
              event.preventDefault();
              if(previous_url){
                  console.log('you pressed left!');
                  window.location.href = previous_url;
              }else {
                  $("#no-previous").addClass("active");
                  setTimeout(function(){$("#no-previous").removeClass("active");}, 1500);
              }
          });

          hotkeys('right', function(event, handler){
              // Prevent the default refresh event under WINDOWS system
              event.preventDefault();
              if(next_url){
                  console.log('you pressed right!');
                  window.location.href = next_url;
              }else {
                  $("#no-next").addClass("active");
                  setTimeout(function(){$("#no-next").removeClass("active");}, 1500);
              }
          });
      });
  </script>
  <script src="https://at.alicdn.com/t/font_3046306_skfh9jzzbbf.js"></script>

  
  
  
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
        if (navigator.serviceWorker.controller) {
            console.log("An active service worker found, no need to register");
        } else {
            // Register the service worker
            navigator.serviceWorker
            .register("/sw.js", {
                scope: "/"
            })
            .then(function (reg) {
                console.log("Service worker has been registered for scope: " + reg.scope);
            });
        }
    }

// 检测浏览器是否支持SW
// if(navigator.serviceWorker != null){
//     navigator.serviceWorker.register("/sw.js")
//         .then(function(registartion){
//             console.log('支持sw:',registartion.scope)
//         })
// } else {
//     console.log('不支持sw')
// }
</script>
	<!--
Author: Ray-Eldath
refer to:
 - http://docs.mathjax.org/en/latest/options/index.html
-->

	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
		jax: ["input/TeX", "output/HTML-CSS"],
		tex2jax: {
			inlineMath: [ ["$", "$"] ],
			displayMath: [ ["$$", "$$"] ],
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
		},
		"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
      });
    </script>

   
    <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
    <script>
        $(document).ready(function (){
            mermaid.initialize({
                startOnLoad:true,
                theme: "default",
            });
            mermaid.init(undefined, $('.mermaid2'));
        });
    </script>
 
   
</body>

</html>
